<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>aj demo simple</title>

    <style>
        *{margin:0; padding: 0}
        html, body{}
        #page{width:860px; margin:0 auto}
        .container{background-color: beige; padding: 4px}
    </style>

    <script src="../src/script.aj_0.1.0.js"></script>
</head>
<body>

<div id="page">


    <h1>File Upload</h1>

    <form name="simple_form">
        <input name="upload_file" type="file">
        <input type="submit" value="Send">
    </form>

    <h2>Result:</h2>

    <div class="container"><div class="progress"></div></div>

</div>




<script>


    var container = document.querySelector('.container'),
        progress = document.querySelector('.progress'),
        form = document.forms.simple_form;

    form.onsubmit = function(event){
        event.preventDefault();

        var file = document.querySelector('input[name=upload_file]');
        AjUpload('upload.php', file, onProgress, onComplete);
    };

    function onProgress(xhr, event){
        progress.innerHTML = "<p>Progress: " + event['loaded'] + " / " + event['total'] + "</p>";
    }
    function onComplete(status, response, xhr, event){
        var log = "<h3>Complete. Status code: "+status+"</h3> response:<br><pre>" + response + "</pre>";
        container.insertAdjacentHTML('beforeend', log);
    }

</script>
</body>
</html>